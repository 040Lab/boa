Index: purge.inc
===================================================================
--- purge.inc	(revision 15666)
+++ purge.inc	(working copy)
@@ -116,13 +116,21 @@
     curl_multi_add_handle($curl_purges, $curl_purge[$current_curl_purge]);
     $current_curl_purge++;
   }
+  
   // Execute the purge requests
   ob_start();
   do {
     $mrc = curl_multi_exec($curl_purges, $running);
   } while ($mrc == CURLM_CALL_MULTI_PERFORM);
+  while ($running && $mrc == CURLM_OK) {
+    if (curl_multi_select($curl_purges) != -1) {
+      do {
+        $mrc = curl_multi_exec($curl_purges, $running);
+      } while ($mrc == CURLM_CALL_MULTI_PERFORM);
+    }
+  }
   ob_end_clean();
-
+  
   // Result collection. Collects the http code returned for each url purged
   $current_curl_purge = 0;
   foreach ($purges as $purge) {
